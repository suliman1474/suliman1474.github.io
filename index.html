<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Muhammad Suliman — Flutter Developer</title>
  <meta name="description" content="Animated portfolio of Muhammad Suliman, Flutter Developer. Projects, skills, and contact." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ['Inter', 'ui-sans-serif', 'system-ui'] },
          colors: {
            brand: {
              50: '#eef2ff', 100: '#e0e7ff', 200: '#c7d2fe', 300: '#a5b4fc', 400: '#818cf8',
              500: '#6366f1', 600: '#4f46e5', 700: '#4338ca', 800: '#3730a3', 900: '#312e81'
            }
          },
          boxShadow: { glow: '0 10px 30px rgba(99,102,241,0.25)' }
        }
      },
      darkMode: 'class'
    }
  </script>
  <style>
    .noise { position: fixed; inset: 0; pointer-events: none; opacity: .035; background-image: url('https://uploads-ssl.webflow.com/5f0f5f9f1f5a3a6c4d2f45d9/5f4e2a5e8b0b1a0c4cbb1a0b_noise.png'); mix-blend-mode: overlay; }
    .gradient-orb { filter: blur(10px); opacity: .18; }
    .magnetic { transition: transform .15s ease; }
    .tilt { will-change: transform; }
    .backdrop { backdrop-filter: blur(8px); background: rgba(15, 23, 42, .6); }
  </style>
  <style>
  .custom-scroll::-webkit-scrollbar {
    width: 8px;
  }
  .custom-scroll::-webkit-scrollbar-thumb {
    background-color: rgba(100, 116, 139, 0.3);
    border-radius: 6px;
  }
  .custom-scroll::-webkit-scrollbar-thumb:hover {
    background-color: rgba(100, 116, 139, 0.5);
  }
</style>

</head>
<body class="bg-slate-50 text-slate-900 dark:bg-[#0b0f19] dark:text-slate-100 antialiased">
  <!-- Decorative background -->
  <div aria-hidden="true" class="pointer-events-none select-none fixed inset-0 -z-10">
    <div class="absolute -top-20 -left-40 h-[40rem] w-[40rem] rounded-full gradient-orb bg-gradient-to-tr from-brand-500 via-fuchsia-500 to-rose-500"></div>
    <div class="absolute -bottom-40 -right-40 h-[40rem] w-[40rem] rounded-full gradient-orb bg-gradient-to-tr from-cyan-500 via-sky-500 to-brand-500"></div>
  </div>
  <div class="noise"></div>

  <!-- Persistent top soft gradient for readability while scrolling -->
  <div class="fixed top-0 inset-x-0 h-28 bg-gradient-to-b from-white/85 to-transparent dark:from-[#0b0f19]/85 pointer-events-none z-20"></div>

  <!-- Navbar (solid, gets more opaque on scroll) -->
  <header id="navbar" class="sticky top-0 z-40 bg-white/80 dark:bg-white/10 border-b border-white/40 dark:border-white/10 shadow-sm transition-colors">
    <nav class="max-w-7xl mx-auto flex items-center justify-between px-4 py-3">
      <a href="#" class="group inline-flex items-center gap-3">
        <div class="h-9 w-9 rounded-xl bg-gradient-to-br from-brand-500 to-indigo-700 shadow-glow"></div>
        <span class="font-semibold tracking-tight">Muhammad Suliman</span>
      </a>
      <div class="flex items-center gap-1 text-sm font-medium">
        <a href="#work" class="px-3 py-2 rounded-lg hover:bg-slate-100 dark:hover:bg-white/10">Work</a>
        <a href="#about" class="px-3 py-2 rounded-lg hover:bg-slate-100 dark:hover:bg-white/10">About</a>
        <a href="#contact" class="px-3 py-2 rounded-lg hover:bg-slate-100 dark:hover:bg-white/10">Contact</a>
        <button id="themeToggle" class="ml-2 p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-white/10" aria-label="Toggle theme">
          <svg id="sunIcon" class="h-5 w-5 hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm0 4a1 1 0 0 1-1-1v-1a1 1 0 1 1 2 0v1a1 1 0 0 1-1 1Zm0-18a1 1 0 0 1-1-1V2a1 1 0 1 1 2 0v1a1 1 0 0 1-1 1Zm10 7h-1a1 1 0 1 1 0-2h1a1 1 0 1 1 0 2ZM3 12H2a1 1 0 1 1 0-2h1a1 1 0 1 1 0 2Zm15.778 7.778a1 1 0 0 1-1.414-1.414l.707-.707a1 1 0 0 1 1.414 1.414l-.707.707ZM5.636 6.05A1 1 0 1 1 4.222 4.636l.707-.707A1 1 0 0 1 6.343 5.343l-.707.707Zm12.728-1.414a1 1 0 0 1 1.414 1.414l-.707.707A1 1 0 0 1 17.657 6.05l.707-.707ZM5.636 19.364l-.707.707A1 1 0 0 1 3.515 18.657l.707-.707A1 1 0 1 1 5.636 19.364Z"/></svg>
          <svg id="moonIcon" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M21.64 13a9 9 0 1 1-10.63-10.63 1 1 0 0 1 1.11 1.45A7 7 0 1 0 20.2 11.9a1 1 0 0 1 1.45 1.1Z"/></svg>
        </button>
      </div>
    </nav>
  </header>

  <!-- Hero -->
  <section id="hero" class="relative overflow-hidden">
    <div class="max-w-7xl mx-auto px-4 py-20 md:py-28 grid md:grid-cols-12 gap-10 items-center">
      <div class="md:col-span-7">
        <h1 class="text-4xl md:text-6xl font-extrabold leading-[1.1]">
          Crafting fast, delightful <span class="bg-clip-text text-transparent bg-gradient-to-r from-brand-500 via-fuchsia-500 to-rose-500">Flutter experiences</span>
        </h1>
        <p class="mt-5 text-lg text-slate-600 dark:text-slate-300 max-w-2xl">
          I build production-grade Flutter apps with real-time device integration (health monitors, Bluetooth), seamless API connectivity (Firebase, Stripe, Google Maps), intuitive UIs, robust state management (GetX, Riverpod), and complete deployment pipelines for Android and iOS.
        </p>
        <div class="mt-8 flex flex-wrap gap-3">
          <a href="#work" class="magnetic inline-flex items-center gap-2 rounded-xl bg-slate-900 text-white px-5 py-3 shadow-glow dark:bg-white dark:text-slate-900">
            <span>View Work</span>
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
          </a>
          <a href="#contact" class="magnetic inline-flex items-center gap-2 rounded-xl border border-slate-300 dark:border-white/20 px-5 py-3">
            Contact
          </a>
        </div>
        <div class="mt-10 flex flex-wrap items-center gap-4 text-sm text-slate-500 dark:text-slate-400">
          <span class="inline-flex items-center gap-2"><span class="h-2 w-2 rounded-full bg-emerald-500"></span> Open to opportunities</span>
          <span class="inline-flex items-center gap-2"><span class="h-2 w-2 rounded-full bg-brand-500"></span> Flutter • Dart • Firebase • REST • BLoC/GetX</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Work -->
  <section id="work" class="relative py-16 md:py-24">
    <div class="max-w-7xl mx-auto px-4">
      <div class="flex items-end justify-between gap-6">
        <h2 class="text-3xl md:text-4xl font-extrabold">Selected Projects</h2>
        <div class="text-sm text-slate-500 dark:text-slate-400">Tap a card for details</div>
      </div>
      <div id="projectsGrid" class="mt-10 grid sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
    </div>
  </section>

  <!-- About -->
  <section id="about" class="relative py-16 md:py-24">
    <div class="max-w-5xl mx-auto px-4 grid md:grid-cols-2 gap-10 items-center">
      <div>
        <h2 class="text-3xl md:text-4xl font-extrabold">About</h2>
        <p class="mt-4 text-slate-600 dark:text-slate-300 leading-relaxed">
          Flutter developer with a product mindset. I ship polished UX, clean architecture, and performance-first apps. Comfortable with native bridges, platform SDKs, and scaling APIs.
        </p>
        <ul class="mt-6 grid grid-cols-2 gap-3 text-sm">
          <li class="rounded-xl bg-white/70 dark:bg-white/5 border border-white/40 dark:border-white/10 p-3">BLoC / GetX / Provider</li>
          <li class="rounded-xl bg-white/70 dark:bg-white/5 border border-white/40 dark:border-white/10 p-3">CI/CD (Codemagic, GitHub)</li>
          <li class="rounded-xl bg-white/70 dark:bg-white/5 border border-white/40 dark:border-white/10 p-3">Firebase, REST, GraphQL</li>
          <li class="rounded-xl bg-white/70 dark:bg-white/5 border border-white/40 dark:border-white/10 p-3">Animations, Lottie, Rive</li>
        </ul>
      </div>
      <div class="relative">
        <div class="absolute -inset-6 rounded-3xl bg-gradient-to-br from-cyan-500/30 via-sky-500/20 to-brand-500/30 blur-2xl"></div>
        <div class="relative rounded-3xl bg-white/70 dark:bg-white/5 border border-white/40 dark:border-white/10 p-6 shadow-xl">
          <div class="aspect-[4/3] rounded-2xl bg-[url('https://images.unsplash.com/photo-1555066931-4365d14bab8c?q=80&w=2070&auto=format&fit=crop')] bg-cover bg-center"></div>
          <p class="mt-4 text-xs text-slate-500 dark:text-slate-400">Building robust UIs and delightful micro-interactions</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact (info only, not buttons) -->
  <section id="contact" class="relative py-16 md:py-24">
    <div class="max-w-4xl mx-auto px-4">
      <div class="rounded-3xl bg-white/70 dark:bg-white/5 border border-white/40 dark:border-white/10 p-8">
        <h2 class="text-3xl md:text-4xl font-extrabold">Let’s build something great</h2>
        <p class="mt-2 text-slate-600 dark:text-slate-300">Open for freelance and full-time roles.</p>

        <div class="mt-6 grid sm:grid-cols-2 gap-4 text-sm">
          <div class="rounded-xl bg-slate-50/70 dark:bg-white/5 border border-white/40 dark:border-white/10 p-4">
            <div class="text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 mb-1">Email</div>
            <a href="mailto:suliman.dev0@gmail.com" class="font-medium hover:underline break-all">suliman.dev0@gmail.com</a>
          </div>
          <div class="rounded-xl bg-slate-50/70 dark:bg-white/5 border border-white/40 dark:border-white/10 p-4">
            <div class="text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 mb-1">LinkedIn</div>
            <a href="https://www.linkedin.com/in/muhammad-suliman-383b5025b/" target="_blank" class="font-medium hover:underline">linkedin.com/in/muhammad-suliman-383b5025b/</a>
          </div>
        </div>
      </div>
    </div>
    <footer class="mt-10 text-center text-xs text-slate-500 dark:text-slate-400">© <span id="year"></span> Muhammad Suliman. All rights reserved.</footer>
  </section>

  <!-- Project Modal -->
  <div id="projectModal" class="fixed inset-0 z-50 hidden items-center justify-center p-4">
    <div class="absolute inset-0 backdrop opacity-0 transition-opacity"></div>
    <div class="relative w-full max-w-5xl scale-95 opacity-0 transition-all" data-panel>
      <div class="rounded-2xl bg-white dark:bg-[#0f1424] border border-white/40 dark:border-white/10 shadow-2xl overflow-hidden">
        <div class="flex items-center justify-between px-6 py-4 border-b border-black/5 dark:border-white/10">
          <h3 id="modalTitle" class="text-lg font-semibold"></h3>
          <button id="modalClose" class="p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-white/10" aria-label="Close">✕</button>
        </div>
       <div class="p-6 grid md:grid-cols-5 gap-6 max-h-[80vh] overflow-y-auto custom-scroll">
          <div class="md:col-span-2">
            <p id="modalDesc" class="text-sm text-slate-600 dark:text-slate-300"></p>
            <div id="modalTags" class="mt-4 flex flex-wrap gap-2 text-xs"></div>
            <p id="modalDates" class="mt-3 text-xs text-slate-500 dark:text-slate-400"></p>
          </div>
        <div id="modalGallery" class="md:col-span-3 grid grid-cols-2 gap-3 max-h-[70vh] overflow-y-auto custom-scroll"></div>

        </div>
      </div>
    </div>
  </div>

<div id="lightbox" class="fixed inset-0 z-[60] hidden flex items-center justify-center">
  <!-- Backdrop -->
  <div id="lightboxBackdrop" class="absolute inset-0 backdrop opacity-0 transition-opacity z-0"></div>

  <!-- Centered image panel -->
  <div id="lightboxPanel"
       class="relative max-w-[95vw] max-h-[92vh] p-2 opacity-0 scale-95 transition-all z-10">
    <img id="lightboxImg"
         alt="Screenshot"
         class="max-w-[95vw] max-h-[82vh] object-contain rounded-xl shadow-2xl border border-white/20" />
  </div>

  <!-- Controls (FIXED to viewport edges) -->
  <button id="lbClose"
          class="fixed top-4 right-4 z-[61] px-3 py-1 rounded-md bg-white/80 dark:bg-white/10
                 border border-white/40 dark:border-white/10 text-sm backdrop-blur
                 hover:bg-white/90 focus:outline-none focus:ring-2 focus:ring-brand-500/60">
    Close (Esc)
  </button>

  <button id="lbPrev"
          class="fixed top-1/2 -translate-y-1/2 left-3 sm:left-4 md:left-6 z-[61]
                 h-12 w-12 rounded-full bg-white/80 dark:bg-white/10 backdrop-blur
                 border border-white/40 dark:border-white/10 shadow-lg
                 flex items-center justify-center text-xl
                 hover:bg-white/90 focus:outline-none focus:ring-2 focus:ring-brand-500/60">
    ←
  </button>

  <button id="lbNext"
          class="fixed top-1/2 -translate-y-1/2 right-3 sm:right-4 md:right-6 z-[61]
                 h-12 w-12 rounded-full bg-white/80 dark:bg-white/10 backdrop-blur
                 border border-white/40 dark:border-white/10 shadow-lg
                 flex items-center justify-center text-xl
                 hover:bg-white/90 focus:outline-none focus:ring-2 focus:ring-brand-500/60">
    →
  </button>
</div>


  <!-- JS: GSAP + Lenis + VanillaTilt -->
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@studio-freight/lenis@1.0.36/bundled/lenis.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vanilla-tilt@1.8.1/dist/vanilla-tilt.min.js"></script>
  <script>
    // Theme toggle
    (function initTheme(){
      const root = document.documentElement;
      const pref = localStorage.getItem('theme');
      if (pref === 'dark' || (!pref && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        root.classList.add('dark');
        document.getElementById('sunIcon').classList.remove('hidden');
        document.getElementById('moonIcon').classList.add('hidden');
      }
      document.getElementById('themeToggle').addEventListener('click', () => {
        root.classList.toggle('dark');
        const isDark = root.classList.contains('dark');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
        document.getElementById('sunIcon').classList.toggle('hidden', !isDark);
        document.getElementById('moonIcon').classList.toggle('hidden', isDark);
      });
    })();

    // Make navbar more opaque on scroll
    (function navOnScroll(){
      const nav = document.getElementById('navbar');
      const onScroll = () => {
        const scrolled = window.scrollY > 8;
        nav.classList.toggle('bg-white/95', scrolled);
        nav.classList.toggle('dark:bg-white/15', scrolled);
      };
      onScroll();
      window.addEventListener('scroll', onScroll, { passive: true });
    })();

    // Smooth scroll (guarded)
    (function initLenis(){
      try {
        const lenis = new Lenis({ smooth: true, lerp: 0.1 });
        function raf(t) { lenis.raf(t); requestAnimationFrame(raf); }
        requestAnimationFrame(raf);
      } catch (_) {}
    })();

    // Magnetic buttons
    (function initMagnetic(){
      document.querySelectorAll('.magnetic').forEach(btn => {
        btn.addEventListener('mousemove', e => {
          const r = btn.getBoundingClientRect();
          const x = e.clientX - r.left - r.width/2;
          const y = e.clientY - r.top - r.height/2;
          btn.style.transform = `translate(${x*0.08}px, ${y*0.08}px)`;
        });
        btn.addEventListener('mouseleave', () => btn.style.transform = 'translate(0,0)');
      });
    })();

    // Tilt blocks (guarded)
    (function initTilt(){
      try { VanillaTilt.init(document.querySelectorAll('.tilt'), { max: 8, speed: 400, glare: true, 'max-glare': .15 }); }
      catch (_) {}
    })();

    // Hero reveal (guarded)
    (function heroReveal(){
      if (!window.gsap) return;
      gsap.from('#hero h1', { y: 20, opacity: 0, duration: .8, ease: 'power3.out' });
      gsap.from('#hero p', { y: 20, opacity: 0, duration: .8, delay: .1, ease: 'power3.out' });
      gsap.from('#hero a', { y: 20, opacity: 0, duration: .8, delay: .2, stagger: .05, ease: 'power3.out' });
    })();

    // Projects data — ensure these paths exist next to your HTML
   const projects = [
  {
    id: 'ihealthcure',
    title: 'IHealthCure App',
    description: 'Healthcare super-app: appointments, rider pickup, vitals integration, secure payments.',
    tech: ['Flutter','Google Maps','Multilingual','Device Integration','Biometric Login','Dark Theme'],
    images: [
      'healthcure/image1.png','healthcure/image2.png','healthcure/image3.png',
      'healthcure/image4.png','healthcure/image5.png','healthcure/image6.png',
      'healthcure/image7.png','healthcure/image8.png','healthcure/image9.png'
    ],
    dates: 'Aug 2024 – Jan 2025'
  },
  {
    id: 'self-serve',
    title: 'Self-Serve Restaurant',
    description: 'Order + pay (Stripe/Reader), LAN/BT printing, notifications, offline storage.',
    tech: ['Flutter','Stripe API','Printer SDK','Sqflite'],
    images: [
      'self-serve/image1.png','self-serve/image2.png','self-serve/image3.png',
      'self-serve/image4.png','self-serve/image5.png','self-serve/image6.png'
    ],
    dates: '2023'
  },
  {
    id: 'online-ordering-manager',
    title: 'Ordering Manager Backend',
    description: 'Ops dashboard and backend to orchestrate and optimize incoming restaurant orders.',
    tech: ['Node.js','Express','MySQL','Push Notifications','Local Storage'],
    images: [
      'online-ordering/image1.png','online-ordering/image2.png','online-ordering/image3.png',
      'online-ordering/image4.png','online-ordering/image5.png','online-ordering/image6.png',
      'online-ordering/image7.png','online-ordering/image8.png','online-ordering/image9.png',
      'online-ordering/image10.png'
    ],
    dates: '2023'
  },
  {
    id: 'click-me-cursive',
    title: 'Click Me Cursive (Kids)',
    description: 'Interactive alphabet learning with drawing + mic for pronunciation.',
    tech: ['Flutter','Educational','Voice Recognition','Interactive UI'],
    images: ['cursive/image1.png','cursive/image2.png'],
    dates: '2022'
  },
  {
    id: 'medico-app',
    title: 'Medico App (Files + Admin)',
    description: 'Uploads/downloads with offline support and an integrated admin CMS for posts/polls.',
    tech: ['Flutter','Firebase','Push Notifications','Content Management'],
    images: [
      'medico/image1.png','medico/image2.png','medico/image3.png',
      'medico/image4.png','medico/image5.png','medico/image6.png'
    ],
    dates: '2022'
  }
];

    (function renderProjects(){
      const grid = document.getElementById('projectsGrid');
      projects.forEach(p => {
        const card = document.createElement('button');
        card.type = 'button';
        card.className = 'group text-left rounded-2xl bg-white/70 dark:bg-white/5 border border-white/40 dark:border-white/10 overflow-hidden hover:shadow-xl transition shadow-glow focus:outline-none focus:ring-2 focus:ring-brand-500/60';
        card.setAttribute('data-id', p.id);
        card.innerHTML = `
          <div class="relative">
            <div class="aspect-video bg-slate-200/70 dark:bg-white/10 overflow-hidden">
              <img src="${p.images[0]}" alt="${p.title} cover" class="h-full w-full object-cover group-hover:scale-[1.03] transition duration-500" onerror="this.src='https://placehold.co/800x450/111827/94a3b8?text=Preview'">
            </div>
            <div class="absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition"></div>
          </div>
          <div class="p-5">
            <div class="flex items-center justify-between gap-3">
              <h3 class="text-lg font-semibold">${p.title}</h3>
              <span class="text-xs text-slate-500 dark:text-slate-400">${p.dates}</span>
            </div>
            <p class="mt-2 text-sm text-slate-600 dark:text-slate-300 line-clamp-2">${p.description}</p>
            <div class="mt-3 flex flex-wrap gap-2 text-xs">
              ${p.tech.slice(0,4).map(t => `<span class="px-2 py-1 rounded-lg bg-slate-100 dark:bg-white/10">${t}</span>`).join('')}
            </div>
          </div>
        `;
        card.addEventListener('click', () => openProject(p.id));
        grid.appendChild(card);
      });
    })();

    // Modal + Lightbox logic
    (function mediaModals(){
      const modal = document.getElementById('projectModal');
      const backdrop = modal.querySelector('.backdrop');
      const panelWrap = modal.querySelector('[data-panel]');
      const titleEl = document.getElementById('modalTitle');
      const descEl = document.getElementById('modalDesc');
      const tagsEl = document.getElementById('modalTags');
      const datesEl = document.getElementById('modalDates');
      const galEl = document.getElementById('modalGallery');
      const closeBtn = document.getElementById('modalClose');

      // Lightbox
      const lb = document.getElementById('lightbox');
      const lbBackdrop = document.getElementById('lightboxBackdrop');
      const lbPanel = document.getElementById('lightboxPanel');
      const lbImg = document.getElementById('lightboxImg');
      const lbClose = document.getElementById('lbClose');
      const lbPrev = document.getElementById('lbPrev');
      const lbNext = document.getElementById('lbNext');

      let currentImages = [];
      let currentIndex = 0;

      function openLightbox(images, index) {
        currentImages = images;
        currentIndex = index;
        lbImg.src = images[index];
        lb.classList.remove('hidden');
        requestAnimationFrame(() => {
          lbBackdrop.classList.remove('opacity-0'); lbBackdrop.classList.add('opacity-100');
          lbPanel.classList.remove('opacity-0','scale-95'); lbPanel.classList.add('opacity-100','scale-100');
        });
        document.body.style.overflow = 'hidden';
      }
      function closeLightbox() {
        lbBackdrop.classList.add('opacity-0'); lbBackdrop.classList.remove('opacity-100');
        lbPanel.classList.add('opacity-0','scale-95'); lbPanel.classList.remove('opacity-100','scale-100');
        setTimeout(() => { lb.classList.add('hidden'); document.body.style.overflow='auto'; }, 160);
      }
      function showIndex(i) {
        if (!currentImages.length) return;
        currentIndex = (i + currentImages.length) % currentImages.length;
        lbImg.src = currentImages[currentIndex];
      }
      lbClose.addEventListener('click', closeLightbox);
      lbBackdrop.addEventListener('click', closeLightbox);
      lbPrev.addEventListener('click', () => showIndex(currentIndex - 1));
      lbNext.addEventListener('click', () => showIndex(currentIndex + 1));
      document.addEventListener('keydown', (e) => {
        if (lb.classList.contains('hidden')) return;
        if (e.key === 'Escape') closeLightbox();
        if (e.key === 'ArrowLeft') showIndex(currentIndex - 1);
        if (e.key === 'ArrowRight') showIndex(currentIndex + 1);
      });

      window.openProject = function(id){
        const p = projects.find(x => x.id === id);
        if (!p) return;

        titleEl.textContent = p.title;
        descEl.textContent = p.description;
        datesEl.textContent = p.dates ? `Dates: ${p.dates}` : '';
        tagsEl.innerHTML = p.tech.map(t => `<span class="px-2 py-1 rounded-lg bg-slate-100 dark:bg-white/10 mr-1 mb-1 inline-block">${t}</span>`).join('');
        galEl.innerHTML = '';

        p.images.forEach((src, idx) => {
          const img = document.createElement('img');
          img.src = src;
          img.alt = `${p.title} screenshot ${idx+1}`;
          img.className = 'rounded-xl object-cover h-40 w-full cursor-zoom-in';
          img.onerror = function(){ this.src = 'https://placehold.co/600x400/111827/94a3b8?text=Screenshot'; };
          img.addEventListener('click', () => openLightbox(p.images, idx));
          galEl.appendChild(img);
        });

        modal.classList.remove('hidden');
        requestAnimationFrame(() => {
          backdrop.classList.remove('opacity-0'); backdrop.classList.add('opacity-100');
          panelWrap.classList.remove('opacity-0','scale-95');
          panelWrap.classList.add('opacity-100','scale-100');
        });
        document.body.style.overflow = 'hidden';
      };

      function closeProject(){
        backdrop.classList.add('opacity-0'); backdrop.classList.remove('opacity-100');
        panelWrap.classList.add('opacity-0','scale-95');
        panelWrap.classList.remove('opacity-100','scale-100');
        setTimeout(() => {
          modal.classList.add('hidden');
          document.body.style.overflow = 'auto';
        }, 160);
      }

      closeBtn.addEventListener('click', closeProject);
      backdrop.addEventListener('click', closeProject);
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && !modal.classList.contains('hidden')) closeProject();
      });
    })();

    // Footer year
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
